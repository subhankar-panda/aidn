(this.webpackJsonptreehax=this.webpackJsonptreehax||[]).push([[0],{179:function(e,t,a){e.exports=a(352)},183:function(e,t,a){},192:function(e,t,a){},352:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(86),l=a.n(c);a(183),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(120),o=a(8),i=a.n(o),u=a(16),m=a(18),h=a(24),p=a(28),d=a(25),f=a(29),E=a(49),b=r.a.createContext(null),y=a(55),g=a.n(y),v=(a(185),a(187),a(189),a(353),{apiKey:"AIzaSyCEfCRFUeWcPZ5wWQPua7ozj3_-iu9q2fQ",authDomain:"ivory-strategy-268307.firebaseapp.com",databaseURL:"https://ivory-strategy-268307.firebaseio.com",projectId:"ivory-strategy-268307",storageBucket:"ivory-strategy-268307.appspot.com",messagingSenderId:"387994896872",appId:"1:387994896872:web:d0ad8992a5cd26f2457c5d",measurementId:"G-6DLE7J09QD"}),x=function(e){return function(t){return r.a.createElement(b.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))}))}},k=function e(){var t=this;Object(m.a)(this,e),this.sendMedicalInfo=function(){var e=Object(u.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.firestore.collection("records").add(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getUserById=function(){var e=Object(u.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.firestore.collection("users").doc(a).get();case 2:return e.abrupt("return",e.sent.data());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g.a.initializeApp(v),this.auth=g.a.auth(),this.provider=new g.a.auth.GoogleAuthProvider,this.db=g.a.database(),this.firestore=g.a.firestore(),this.analytics=g.a.analytics()};a(192);var w=function(){return r.a.createElement("div",{className:"home container-fluid h-100 d-flex"},r.a.createElement("div",{className:"row my-auto w-100"},r.a.createElement("div",{className:"col-md-6 d-flex"},r.a.createElement("img",{src:"/aidn2.png",className:" w-75 mx-auto img-fluid"})),r.a.createElement("div",{className:"col-md-6 d-flex"},r.a.createElement("div",{className:"my-auto text-center w-100 home-text"},"aid network. built for you."))))},j=a(178),O=a(354),C=a(355),N=a(356),S=a(367),I=a(357),U=a(358),P=a(359),q=a(360),B=a(361),T=function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),c=a[0],l=a[1],s=e.authenticated;return r.a.createElement("div",null,r.a.createElement(O.a,{color:"light",light:!0,expand:"md"},r.a.createElement(C.a,{href:"/"},"aidn."),r.a.createElement(N.a,{onClick:function(){return l(!c)}}),r.a.createElement(S.a,{isOpen:c,navbar:!0},r.a.createElement(I.a,{className:"mr-auto",navbar:!0},r.a.createElement(U.a,null,!s&&r.a.createElement(P.a,{href:"/signup/"},r.a.createElement(q.a,{outline:!0,color:"secondary"},"sign up"))),r.a.createElement(U.a,null,!s&&r.a.createElement(P.a,{href:"/login/"},r.a.createElement(q.a,{outline:!0,color:"secondary"},"log in"))),r.a.createElement(U.a,null,r.a.createElement(P.a,{href:"/assist/"},r.a.createElement(q.a,{outline:!0,color:"secondary"},"assistant"))),r.a.createElement(U.a,null,s&&r.a.createElement(P.a,{href:"/medical-history/"},r.a.createElement(q.a,{outline:!0,color:"secondary"},"medical history"))),r.a.createElement(U.a,null,s&&r.a.createElement(P.a,{href:"/doctors/"},r.a.createElement(q.a,{outline:!0,color:"secondary"},"doctors"))),r.a.createElement(U.a,null,r.a.createElement(P.a,{href:"/emergency"},r.a.createElement(q.a,{color:"danger"},"Medical Emergency")))),e.user&&r.a.createElement(B.a,{className:"pr-2"},"hi, ",e.user.name," "),r.a.createElement(B.a,null,r.a.createElement("img",{className:"rounded-circle img-responsive",style:{width:"3rem"},src:e.user&&e.user.picUrl})))))},R=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"this is the page a doctor or healthcare professional would see")}}]),t}(r.a.Component),A=a(88),D=a(362),L=a(363),z=a(364),M=a(365),H=(a(202),x(function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleCheckbox=function(e,t){a.setState(Object(A.a)({},e,t.target.checked))},a.handleAllergies=function(e){a.setState({allergies:e.target.value})},a.handleConditions=function(e){a.setState({conditions:e.target.value})},a.handleMessage=function(e){a.setState({message:e.target.value})},a.handleSubmit=Object(u.a)(i.a.mark((function e(){var t,n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=[],n={arthritis:"Arthritis",cancer:"Cancer",diabetes:"Diabetes",depression:"Depression",epilepsyseizures:"Epilepsy",heartproblems:"Heart Problems",heartsurgery:"Heart Surgery",highbp:"High Blood Pressure",psycdisease:"Psychiatric Disease",stroke:"Stroke",thyroid:"Thyroid"})1==a.state[r]&&t.push(n[r]);return t.push(a.state.conditions),c={conditions:t,allergies:a.state.allergies,message:a.state.message,personId:a.props.user.personId},e.next=7,a.props.firebase.sendMedicalInfo(c);case 7:console.log(t);case 8:case"end":return e.stop()}}),e)}))),a.state={arthritis:!1,cancer:!1,diabetes:!1,depression:!1,epilepsyseizures:!1,heartproblems:!1,heartsurgery:!1,highbp:!1,psycdisease:!1,stroke:!1,thyroid:!1},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.state),r.a.createElement("div",{className:"w-75 mx-auto"},r.a.createElement(D.a,null,r.a.createElement("h3",{className:"mt-4 mx-auto"},"medical history"),r.a.createElement("h4",{className:"mt-4"},"please check all that apply to you:"),r.a.createElement(L.a,{check:!0},r.a.createElement(z.a,{check:!0},r.a.createElement(M.a,{type:"checkbox",onClick:function(t){return e.handleCheckbox("arthritis",t)},value:this.state.arthritis})," ","Arthritis")),r.a.createElement(L.a,{check:!0},r.a.createElement(z.a,{check:!0},r.a.createElement(M.a,{type:"checkbox",onClick:function(t){return e.handleCheckbox("cancer",t)},value:this.state.cancer})," ","Cancer")),r.a.createElement(L.a,{check:!0},r.a.createElement(z.a,{check:!0},r.a.createElement(M.a,{type:"checkbox",onClick:function(t){return e.handleCheckbox("depression",t)},value:this.state.depression})," ","Depression")),r.a.createElement(L.a,{check:!0},r.a.createElement(z.a,{check:!0},r.a.createElement(M.a,{type:"checkbox",onClick:function(t){return e.handleCheckbox("diabetes",t)},value:this.state.diabetes})," ","Diabetes")),r.a.createElement(L.a,{check:!0},r.a.createElement(z.a,{check:!0},r.a.createElement(M.a,{type:"checkbox",onClick:function(t){return e.handleCheckbox("epilepsyseizures",t)},value:this.state.epilepsyseizures})," ","Epilepsy/Seizures")),r.a.createElement(L.a,{check:!0},r.a.createElement(z.a,{check:!0},r.a.createElement(M.a,{type:"checkbox",onClick:function(t){return e.handleCheckbox("heartproblems",t)},value:this.state.heartproblems})," ","Heart Problems")),r.a.createElement(L.a,{check:!0},r.a.createElement(z.a,{check:!0},r.a.createElement(M.a,{type:"checkbox",onClick:function(t){return e.handleCheckbox("heartsurgery",t)},value:this.state.heartsurgery})," ","Heart Surgery")),r.a.createElement(L.a,{check:!0},r.a.createElement(z.a,{check:!0},r.a.createElement(M.a,{type:"checkbox",onClick:function(t){return e.handleCheckbox("highbp",t)},value:this.state.highbp})," ","High Blood Pressure")),r.a.createElement(L.a,{check:!0},r.a.createElement(z.a,{check:!0},r.a.createElement(M.a,{type:"checkbox",onClick:function(t){return e.handleCheckbox("psycdisease",t)},value:this.state.psycdisease})," ","Psychiatric Disease")),r.a.createElement(L.a,{check:!0},r.a.createElement(z.a,{check:!0},r.a.createElement(M.a,{type:"checkbox",onClick:function(t){return e.handleCheckbox("stroke",t)},value:this.state.stroke})," ","Stroke")),r.a.createElement(L.a,{check:!0},r.a.createElement(z.a,{check:!0},r.a.createElement(M.a,{type:"checkbox",onClick:function(t){return e.handleCheckbox("thyroid",t)},value:this.state.thyroid})," ","Thyroid")),r.a.createElement(L.a,{style:{marginTop:"15px"}},r.a.createElement(z.a,{for:"exampleText"},'please enter any serious allergies, separated by commas and spaces (ex. "peanuts, ibuprofen"):'),r.a.createElement(M.a,{type:"textarea",name:"text",onChange:function(t){return e.handleAllergies(t)},value:this.state.allergies})),r.a.createElement(L.a,{style:{marginTop:"15px"}},r.a.createElement(z.a,{for:"exampleText"},"please enter any alternate conditions your aid network should be aware of:"),r.a.createElement(M.a,{type:"textarea",name:"text",onChange:function(t){return e.handleConditions(t)},value:this.state.conditions})),r.a.createElement(L.a,{style:{marginTop:"15px"}},r.a.createElement(z.a,{for:"exampleText"},"customize your emergency screen message:"),r.a.createElement(z.a,{for:"exampleText"},'(ex. "I have had a heart transplant. Please do not administer a defibrillator.")'),r.a.createElement(M.a,{type:"textarea",name:"text",onChange:function(t){return e.handleMessage(t)},value:this.state.message})),r.a.createElement(q.a,{onClick:this.handleSubmit},"Submit")))}}]),t}(r.a.Component))),F=a(89),J=a(17),W=a(366);var Q=function(e){var t=e.field,a=e.form;return r.a.createElement("div",null,r.a.createElement("input",{type:"file",onChange:function(e){return function(e){var n=e.currentTarget.files[0],r=new FileReader,c=document.getElementById("myimage");c.title=n.name,r.onload=function(e){c.src=e.target.result},r.readAsDataURL(n),a.setFieldValue(t.name,n)}(e)},className:"form-control mx-auto"}),r.a.createElement("img",{className:"w-25",src:"",alt:"",id:"myimage"}))},V=a(121),G=a.n(V),$=a(122),K=a.n($);function Z(e){return _.apply(this,arguments)}function _(){return(_=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",G.a.post("/api/signup").field("body",JSON.stringify(t)).attach("pic",t.image?t.image:null).use(K.a));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.abrupt("return",G.a.post("/api/lookup").field("ahhhhaha","pls").attach("pic",t.image?t.image:null).use(K.a));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=a(31),te=function(e){var t=e.field,a=e.form,n=a.touched,c=a.errors,l=Object(F.a)(e,["field","form"]);return r.a.createElement("div",null,r.a.createElement(M.a,Object.assign({invalid:!(!n[t.name]||!c[t.name])},t,l)),n[t.name]&&c[t.name]&&r.a.createElement(W.a,null,c[t.name]))},ae=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,ne=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).signupUser=function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,Z(t);case 3:a=e.sent,localStorage.setItem("person",a.body.personId);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.schema=ee.a({firstName:ee.b().max(15,"Must be 15 characters or less").required("Required"),lastName:ee.b().max(20,"Must be 20 characters or less").required("Required"),email:ee.b().email("Invalid email address").required("Required"),password:ee.b().required("Required"),contactEmail:ee.b().email("Invalid email address"),phoneNumber:ee.b().matches(ae,"Phone number is not valid")}),a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(J.b,{initialValues:{email:"me@ucsd.edu",password:""},validationSchema:this.schema,onSubmit:function(){var t=Object(u.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.signupUser(a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},(function(e){var t=e.handleSubmit;return(r.a.createElement("form",{className:"w-50 mx-auto mt-5",onSubmit:t},r.a.createElement("h2",null,"your information:"),r.a.createElement(L.a,null,r.a.createElement(z.a,{for:"firstName"},"first name"),r.a.createElement(J.a,{name:"firstName",type:"text",component:te})),r.a.createElement(L.a,null,r.a.createElement(z.a,{for:"lastName"},"last name"),r.a.createElement(J.a,{name:"lastName",type:"text",component:te})),r.a.createElement(L.a,null,r.a.createElement(z.a,{for:"email"},"email"),r.a.createElement(J.a,{name:"email",type:"email",component:te})),r.a.createElement(L.a,null,r.a.createElement(z.a,{for:"password"},"password"),r.a.createElement(J.a,{name:"password",type:"password",component:te})),r.a.createElement(L.a,null,r.a.createElement(z.a,{for:"profilePhoto"},"upload profile photo"),r.a.createElement(J.a,{style:{margin:"auto"},name:"image",component:Q})),r.a.createElement("h2",null,"emergency contact information:"),r.a.createElement("h8",null,"this person will be contacted in the event of an emergency"),r.a.createElement(L.a,null,r.a.createElement(z.a,{for:"contact1"},"first name"),r.a.createElement(J.a,{name:"firstName",type:"firstName",component:te})),r.a.createElement(L.a,null,r.a.createElement(z.a,{for:"contact1"},"last name"),r.a.createElement(J.a,{name:"lastName",type:"lastName",component:te})),r.a.createElement(L.a,null,r.a.createElement(z.a,{for:"contact1"},"phone number"),r.a.createElement(J.a,{name:"phoneNumber",type:"phoneNumber",component:te})),r.a.createElement(L.a,null,r.a.createElement(z.a,{for:"contact1"},"email"),r.a.createElement(J.a,{name:"contactEmail",type:"contactEmail",component:te})),r.a.createElement(q.a,{color:"info",type:"submit"},"sign up"),r.a.createElement(q.a,{color:"link",href:"/login/"},"log in instead!")))}))}}]),t}(r.a.Component),re=function(e){var t=e.field,a=e.form,n=a.touched,c=a.errors,l=Object(F.a)(e,["field","form"]);return r.a.createElement("div",null,r.a.createElement(M.a,Object.assign({invalid:!(!n[t.name]||!c[t.name])},t,l)),n[t.name]&&c[t.name]&&r.a.createElement(W.a,null,c[t.name]))},ce=function(){var e=ee.a({email:ee.b().email("Invalid email address").required("Required"),password:ee.b().required("Required")});return r.a.createElement(J.b,{initialValues:{email:"",password:""},validationSchema:e,onSubmit:function(e){console.log(e)}},r.a.createElement("div",{className:"d-flex"},r.a.createElement("img",{src:"../../aidn2.png",className:"img-thumbnail w-25 text-center m-auto"}),r.a.createElement(D.a,{className:"w-50 mx-auto mt-5"},r.a.createElement(L.a,null,r.a.createElement(z.a,{for:"exampleEmail"},"email"),r.a.createElement(J.a,{name:"email",type:"email",component:re})),r.a.createElement(L.a,null,r.a.createElement(z.a,{for:"examplePassword"},"password"),r.a.createElement(J.a,{name:"password",type:"password",component:re})),r.a.createElement(q.a,{color:"info"},"log in"),r.a.createElement(q.a,{color:"link",href:"/signup/"},"sign up instead!"))))},le=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("iframe",{allow:"microphone;",width:"100%",height:"90%",src:"https://console.dialogflow.com/api-client/demo/embedded/d3508c61-479c-4dab-94a8-52a6267f82b2"})}}]),t}(r.a.Component),se=a(176),oe=a.n(se),ie=(a(349),x(function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleTakePhoto=function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r,c,l,s,o,u,m,h,p,d,f,E,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dataURItoBlob(t),e.next=3,X({image:n});case 3:r=e.sent,console.log(r),c=!0,l=!1,s=void 0,e.prev=8,o=r.body[Symbol.iterator]();case 10:if(c=(u=o.next()).done){e.next=49;break}m=u.value,h=!0,p=!1,d=void 0,e.prev=15,f=m.candidates[Symbol.iterator]();case 17:if(h=(E=f.next()).done){e.next=32;break}if(b=E.value,console.log(b),!(b.confidence>.5)){e.next=29;break}return console.log("here!"),e.t0=a,e.next=25,a.props.firebase.getUserById(b.personId);case 25:return e.t1=e.sent,e.t2={foundUser:e.t1,error:null},e.t0.setState.call(e.t0,e.t2),e.abrupt("return");case 29:h=!0,e.next=17;break;case 32:e.next=38;break;case 34:e.prev=34,e.t3=e.catch(15),p=!0,d=e.t3;case 38:e.prev=38,e.prev=39,h||null==f.return||f.return();case 41:if(e.prev=41,!p){e.next=44;break}throw d;case 44:return e.finish(41);case 45:return e.finish(38);case 46:c=!0,e.next=10;break;case 49:e.next=55;break;case 51:e.prev=51,e.t4=e.catch(8),l=!0,s=e.t4;case 55:e.prev=55,e.prev=56,c||null==o.return||o.return();case 58:if(e.prev=58,!l){e.next=61;break}throw s;case 61:return e.finish(58);case 62:return e.finish(55);case 63:a.setState({foundUser:null,error:"No Match Found :("});case 64:case"end":return e.stop()}}),e,null,[[8,51,55,63],[15,34,38,46],[39,,41,45],[56,,58,62]])})));return function(t){return e.apply(this,arguments)}}(),a.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),r=new Uint8Array(n),c=0;c<t.length;c++)r[c]=t.charCodeAt(c);return new Blob([n],{type:a})},a.state={foundUser:null},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"text-success text-center my-5"},r.a.createElement("h1",null,this.state.foundUser&&"User confirmed to be ".concat(this.state.foundUser.name))),r.a.createElement("div",{className:"text-danger text-center my-5"},r.a.createElement("h1",null,this.state.error)),r.a.createElement(oe.a,{onTakePhoto:function(t){e.handleTakePhoto(t)}}))}}]),t}(r.a.Component))),ue=x(function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).withLayout=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T,{user:a.state.user,authenticated:a.state.authenticated}),r.a.createElement(e,{user:a.state.user}))},a.state={authenticated:!1,user:null},a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.firebase.getUserById(localStorage.person);case 3:t=e.sent,this.setState({user:t,authenticated:!0}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),this.setState({authenticated:!1});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/",exact:!0},this.withLayout(w)),r.a.createElement(E.a,{path:"/doctors",exact:!0},this.withLayout(R)),r.a.createElement(E.a,{path:"/medical-history",exact:!0},this.withLayout(H)),r.a.createElement(E.a,{path:"/signup",exact:!0},this.withLayout(ne)),r.a.createElement(E.a,{path:"/login",exact:!0},this.withLayout(ce)),r.a.createElement(E.a,{path:"/assist",exact:!0},this.withLayout(le)),r.a.createElement(E.a,{path:"/emergency",exact:!0},this.withLayout(ie)))}}]),t}(r.a.Component));a(351);l.a.render(r.a.createElement(s.a,null,r.a.createElement(b.Provider,{value:new k},r.a.createElement(ue,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[179,1,2]]]);
//# sourceMappingURL=main.216c28c0.chunk.js.map